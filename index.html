<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumineth Battle Scripture</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #0f172a;
            color: #e2e8f0;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .rune-card {
            background: #1e293b;
            border: 1px solid #334155;
            transition: all 0.3s ease;
        }
        /* Colori Tabella */
        .cell-base { background-color: #0f172a; border: 1px solid #1e293b; }
        .rune-header { background-color: #1e293b; color: #94a3b8; }
        .rune-active-cell { background-color: #064e3b !important; color: #34d399 !important; border: 2px solid #10b981 !important; }
        .synergy-ready { color: #f59e0b; border: 1px solid #78350f; background-color: rgba(120, 53, 15, 0.1); }
        .synergy-active { background-color: #78350f !important; color: #fbce77 !important; border: 2px solid #f59e0b !important; }
        
        .round-btn {
            background: #1e293b;
            border: 1px solid #334155;
            color: #94a3b8;
        }
        .round-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #60a5fa;
        }
        .lock-btn {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        /* Modal styling */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(8px);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="app" class="max-w-6xl mx-auto">
        
        <!-- HEADER -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
            <div>
                <h1 class="text-2xl font-black tracking-tighter uppercase italic text-white flex items-center gap-2">
                    <span class="text-blue-500">AETHER</span>SCRIPT
                </h1>
                <p class="text-xs text-slate-500 uppercase tracking-widest font-bold">Lumineth Battle Manager</p>
            </div>
            <div id="round-indicator" class="flex gap-2 bg-slate-900 p-1 rounded-lg border border-slate-800">
                <!-- Round buttons generated here -->
            </div>
        </div>

        <!-- SEZIONE SETUP -->
        <div id="setup-screen" class="space-y-6">
            <div class="rune-card p-6 rounded-2xl shadow-2xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-white uppercase tracking-tight">Esercito</h2>
                    <span class="text-xs text-slate-400">Seleziona le unità per abilitare i bonus passivi</span>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3" id="unit-grid">
                    <!-- Units generated here -->
                </div>
                <div class="mt-8 flex justify-center">
                    <button onclick="startBattle()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-12 rounded-xl transition-all shadow-lg shadow-blue-900/20">
                        CONFIGURA SCRITTURA
                    </button>
                </div>
            </div>
        </div>

        <!-- SEZIONE BATTLE -->
        <div id="battle-screen" class="hidden space-y-6">
            
            <!-- CONTROLLO RUNE -->
            <div class="flex flex-col md:flex-row gap-4 items-center justify-between bg-slate-900/50 p-4 rounded-xl border border-slate-800">
                <div class="flex items-center gap-4">
                    <span class="text-xs font-bold text-slate-500 uppercase">Selezione Round:</span>
                    <div id="pending-selection" class="text-blue-400 font-bold uppercase tracking-widest text-lg">-</div>
                </div>
                <div id="lock-container" class="hidden">
                    <button onclick="lockCurrentRune()" class="lock-btn bg-emerald-600 hover:bg-emerald-500 text-white font-black py-2 px-8 rounded-lg flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        LOCK RUNE
                    </button>
                </div>
                <button onclick="resetApp()" class="text-[10px] text-slate-600 hover:text-red-400 uppercase font-bold tracking-widest">Reset Battaglia</button>
            </div>

            <!-- MATRICE DELLE RUNE -->
            <div class="overflow-x-auto rounded-xl border border-slate-800 shadow-2xl bg-slate-950">
                <table class="w-full text-[11px] leading-tight border-collapse">
                    <thead>
                        <tr class="rune-header">
                            <th class="p-4 border-r border-slate-700 text-blue-400 font-black italic uppercase">Rune</th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-700 transition-all border-r border-slate-700" onclick="previewRune('Varinor')">
                                <div class="mb-1 opacity-80" id="icon-Varinor"></div>
                                <div class="font-bold">Varinor</div>
                                <div class="text-[9px] opacity-50 uppercase">Strength</div>
                            </th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-700 transition-all border-r border-slate-700" onclick="previewRune('Alaithi')">
                                <div class="mb-1 opacity-80" id="icon-Alaithi"></div>
                                <div class="font-bold text-emerald-400">Alaithi</div>
                                <div class="text-[9px] opacity-50 uppercase">Mountain</div>
                            </th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-700 transition-all border-r border-slate-700" onclick="previewRune('Ydriliqi')">
                                <div class="mb-1 opacity-80" id="icon-Ydriliqi"></div>
                                <div class="font-bold">Ydriliqi</div>
                                <div class="text-[9px] opacity-50 uppercase">River</div>
                            </th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-700 transition-all border-r border-slate-700" onclick="previewRune('Oreali')">
                                <div class="mb-1 opacity-80" id="icon-Oreali"></div>
                                <div class="font-bold">Oreali</div>
                                <div class="text-[9px] opacity-50 uppercase">Wind</div>
                            </th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-700 transition-all" onclick="previewRune('Thalari')">
                                <div class="mb-1 opacity-80" id="icon-Thalari"></div>
                                <div class="font-bold">Thalari</div>
                                <div class="text-[9px] opacity-50 uppercase">Zenith</div>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="matrix-body">
                        <!-- Generato dinamicamente -->
                    </tbody>
                </table>
            </div>

            <!-- FOOTER INFO -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Sezione Buff Unità -->
                <div class="lg:col-span-2 space-y-4">
                    <div class="flex items-center gap-2 text-blue-400 font-bold uppercase text-xs tracking-widest">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        Unit Buffs & Warscrolls
                    </div>
                    <div id="buff-container" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <!-- Buffs -->
                    </div>
                </div>

                <!-- Sezione Azioni Eroe -->
                <div class="space-y-4">
                    <div class="flex items-center gap-2 text-purple-400 font-bold uppercase text-xs tracking-widest">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
                        Azioni Eroe
                    </div>
                    <div id="hero-actions" class="flex flex-col gap-2">
                        <!-- Buttons -->
                    </div>
                </div>
            </div>
        </div>

        <!-- MODALE SELEZIONE RUNE -->
        <div id="rune-modal" class="hidden fixed inset-0 modal-overlay z-50 flex items-center justify-center p-4">
            <div class="bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-md p-6 shadow-2xl">
                <h3 id="modal-title" class="text-xl font-bold text-white mb-4 uppercase tracking-tight">Seleziona Runa</h3>
                <div class="grid grid-cols-1 gap-3" id="modal-options">
                    <!-- Opzioni generate qui -->
                </div>
                <button onclick="closeModal()" class="mt-6 w-full py-2 text-slate-500 font-bold text-xs uppercase tracking-widest hover:text-white transition-all">Annulla</button>
            </div>
        </div>
    </div>

    <script>
        // ICONE SVG DELLE RUNE
        const ICONS = {
            Varinor: `<svg viewBox="0 0 24 24" class="w-6 h-6 mx-auto fill-current"><path d="M12 2L4 7v10l8 5 8-5V7l-8-5zm0 2.5L18 8v8l-6 3.75L6 16V8l6-3.5zM12 7l-4 2.5v5L12 17l4-2.5v-5L12 7z"/></svg>`,
            Alaithi: `<svg viewBox="0 0 24 24" class="w-6 h-6 mx-auto fill-current"><path d="M12 3L2 21h20L12 3zm0 4.5L18.5 19H5.5L12 7.5zM12 11l-3 4.5h6L12 11z"/></svg>`,
            Ydriliqi: `<svg viewBox="0 0 24 24" class="w-6 h-6 mx-auto fill-current"><path d="M12 2c-4 4-7 7-7 11a7 7 0 0014 0c0-4-3-7-7-11zm0 2.5c3 3.5 5 6 5 8.5a5 5 0 01-10 0c0-2.5 2-5 5-8.5zM12 11a2 2 0 100 4 2 2 0 000-4z"/></svg>`,
            Oreali: `<svg viewBox="0 0 24 24" class="w-6 h-6 mx-auto fill-current"><path d="M13 3l-1 1-1-1-3 3 1 1 1-1 1 1v11l-1 1-1-1-1 1 3 3 3-3-1-1-1 1-1-1V7l1-1 1 1 1-1-3-3z"/></svg>`,
            Thalari: `<svg viewBox="0 0 24 24" class="w-6 h-6 mx-auto fill-current"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16 8 8 0 010-16zm0 3a5 5 0 100 10 5 5 0 000-10z"/></svg>`
        };

        const UNITS_DB = [
            { id: 'teclis', name: 'Archmage Teclis', skill: 'Discs: Aggiunge 1 runa extra (R2+).' },
            { id: 'lyrior', name: 'Lyrior Uthralle', skill: 'Champion: +1 Varinor per Vanari vicini.' },
            { id: 'calligrave', name: 'Scinari Calligrave', skill: 'Realmscribe: Sostituisci una runa.' },
            { id: 'avalenor', name: 'Avalenor', skill: 'Call: +1 Alaithi per Alarith vicini.' },
            { id: 'mt_spirit', name: 'Spirit of Mountain', skill: 'Landslide: +1 Atk per ogni Alaithi.' },
            { id: 'bladelords', name: 'Vanari Bladelords', skill: 'Masters: +1 Rend per ogni Varinor.' },
            { id: 'stoneguard', name: 'Alarith Stoneguard', skill: 'Fortitude: Save 3+ se Alaithi >= 2.' },
            { id: 'windchargers', name: 'Hurakan Windchargers', skill: 'Range: +6" archi se Oreali >= 2.' },
            { id: 'riverblades', name: 'Ydrilan Riverblades', skill: 'Teleport: se Ydriliqi attiva.' },
            { id: 'sevireth', name: 'Sevireth', skill: 'Winds: +1 Oreali per Hurakan.' }
        ];

        const RUNES = ['Varinor', 'Alaithi', 'Ydriliqi', 'Oreali', 'Thalari'];
        const BASE_EFFECTS = {
            Varinor: "+1 Run/Charge rolls for targets.",
            Alaithi: "Targets gain Ward (5+).",
            Ydriliqi: "Enemy charge rolls -2 within 12\" of targets.",
            Oreali: "Enemy hit rolls -1 in combat with targets.",
            Thalari: "+2 to casting rolls for all friendly units."
        };

        const SYNERGIES = [
            { row: 'Varinor', col: 'Alaithi', text: 'Melee weapons gain Anti-charge (+1 Rend)' },
            { row: 'Varinor', col: 'Oreali', text: '+4" to Move characteristic' },
            { row: 'Alaithi', col: 'Ydriliqi', text: 'Ignore negative modifiers to hit and wound rolls' },
            { row: 'Alaithi', col: 'Oreali', text: '+5 to control score' },
            { row: 'Ydriliqi', col: 'Varinor', text: '+1 to wound rolls for combat attacks' },
            { row: 'Ydriliqi', col: 'Alaithi', text: '-1 to wound rolls for enemy attacks in combat' },
            { row: 'Oreali', col: 'Varinor', text: 'Targets can Shoot and/or Charge after Retreating' },
            { row: 'Oreali', col: 'Ydriliqi', text: 'Targets can move 3" (can pass through enemies)' }
        ];

        let state = {
            selectedUnits: [],
            currentRound: 1,
            lockedRunes: { 1: null, 2: null, 3: null, 4: null, 5: null },
            pendingRune: null,
            teclisRune: null,
            modalCallback: null
        };

        function init() {
            RUNES.forEach(r => {
                const el = document.getElementById(`icon-${r}`);
                if(el) el.innerHTML = ICONS[r];
            });

            const unitGrid = document.getElementById('unit-grid');
            unitGrid.innerHTML = UNITS_DB.map(u => `
                <div onclick="toggleUnit('${u.id}')" id="u-${u.id}" class="rune-card p-3 rounded-xl cursor-pointer hover:border-blue-500 transition-all">
                    <div class="font-bold text-xs text-slate-200">${u.name}</div>
                    <div class="text-[9px] text-slate-500 mt-1">${u.skill}</div>
                </div>
            `).join('');

            renderRoundButtons();
        }

        function toggleUnit(id) {
            const idx = state.selectedUnits.indexOf(id);
            if(idx > -1) state.selectedUnits.splice(idx, 1);
            else state.selectedUnits.push(id);
            updateSetupUI();
        }

        function updateSetupUI() {
            UNITS_DB.forEach(u => {
                const el = document.getElementById(`u-${u.id}`);
                if(state.selectedUnits.includes(u.id)) {
                    el.classList.add('border-blue-500', 'bg-blue-900/10');
                } else {
                    el.classList.remove('border-blue-500', 'bg-blue-900/10');
                }
            });
        }

        function renderRoundButtons() {
            const container = document.getElementById('round-indicator');
            container.innerHTML = [1,2,3,4,5].map(r => `
                <button onclick="setRound(${r})" class="round-btn w-8 h-8 rounded font-black text-xs transition-all ${state.currentRound === r ? 'active' : ''}">
                    ${r}
                </button>
            `).join('');
        }

        function setRound(r) {
            state.currentRound = r;
            state.pendingRune = null;
            renderRoundButtons();
            updateBattleUI();
        }

        function startBattle() {
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('battle-screen').classList.remove('hidden');
            updateBattleUI();
        }

        function resetApp() {
            state.lockedRunes = { 1: null, 2: null, 3: null, 4: null, 5: null };
            state.pendingRune = null;
            state.teclisRune = null;
            state.currentRound = 1;
            document.getElementById('setup-screen').classList.remove('hidden');
            document.getElementById('battle-screen').classList.add('hidden');
            updateSetupUI();
        }

        function previewRune(rune) {
            state.pendingRune = rune;
            updateBattleUI();
        }

        function lockCurrentRune() {
            if(state.pendingRune) {
                state.lockedRunes[state.currentRound] = state.pendingRune;
                state.pendingRune = null;
                updateBattleUI();
            }
        }

        function getActiveRunes() {
            const active = [];
            for(let i=1; i<=state.currentRound; i++) {
                if(state.lockedRunes[i]) active.push(state.lockedRunes[i]);
            }
            if(state.teclisRune) active.push(state.teclisRune);
            return active;
        }

        function updateBattleUI() {
            const matrix = document.getElementById('matrix-body');
            const activeRunes = getActiveRunes();
            const displayedRune = state.pendingRune || state.lockedRunes[state.currentRound];

            document.getElementById('pending-selection').innerText = displayedRune || "Seleziona una runa";
            document.getElementById('lock-container').classList.toggle('hidden', !state.pendingRune);

            let html = '';

            // BASE EFFECT ROW
            html += `<tr class="border-b border-slate-800">
                <td class="p-4 bg-slate-900/80 font-black text-slate-500 border-r border-slate-800 text-center uppercase">Base</td>`;
            RUNES.forEach(rune => {
                const isActive = (displayedRune === rune);
                html += `<td class="p-4 cell-base text-center ${isActive ? 'rune-active-cell' : ''}">${BASE_EFFECTS[rune]}</td>`;
            });
            html += `</tr>`;

            // SYNERGY ROWS
            RUNES.forEach(rowRune => {
                const isRowActive = activeRunes.includes(rowRune);
                const count = activeRunes.filter(r => r === rowRune).length;
                
                html += `<tr class="border-b border-slate-800">
                    <td class="p-4 bg-slate-900/80 font-bold border-r border-slate-800 flex flex-col items-center">
                        <div class="w-4 h-4 mb-1 ${isRowActive ? 'text-blue-400' : 'text-slate-700'}">${ICONS[rowRune]}</div>
                        <span class="${isRowActive ? 'text-white' : 'text-slate-600'} text-[10px]">${rowRune}</span>
                        ${count > 1 ? `<span class="text-[8px] text-blue-400 font-black">x${count}</span>` : ''}
                    </td>`;
                
                RUNES.forEach(colRune => {
                    const isColDisplayed = (displayedRune === colRune);
                    const synergy = SYNERGIES.find(s => s.row === rowRune && s.col === colRune);
                    
                    let cellClass = "p-4 cell-base text-center ";
                    if (isRowActive && isColDisplayed && synergy) cellClass += "synergy-active shadow-inner";
                    else if (isRowActive && synergy) cellClass += "synergy-ready opacity-90";
                    else cellClass += "text-slate-700 opacity-40";

                    // Zenith Logic (Thalari)
                    if (colRune === 'Thalari') {
                        const uniqueCount = [...new Set(activeRunes)].length;
                        if (rowRune === 'Varinor') {
                             html += `<td rowspan="4" class="p-4 cell-base text-center border-l border-slate-800 ${isColDisplayed ? 'rune-active-cell' : 'text-slate-700 opacity-40'}">
                                <div class="font-bold text-xs">+4" Move & 5+ Crits</div>
                                <div class="text-[9px] mt-2 opacity-60">Richiede 4 rune uniche<br>(Attuali: <span class="text-blue-400 font-bold">${uniqueCount}/4</span>)</div>
                             </td>`;
                             return;
                        }
                        if (['Alaithi', 'Ydriliqi', 'Oreali'].includes(rowRune)) return; 
                    }

                    html += `<td class="${cellClass}">${synergy ? synergy.text : '—'}</td>`;
                });
                html += `</tr>`;
            });

            matrix.innerHTML = html;
            renderHeroActions();
            renderUnitBuffs();
        }

        // MODALE GESTIONE
        function openRuneModal(title, callback, filter = RUNES) {
            const modal = document.getElementById('rune-modal');
            const titleEl = document.getElementById('modal-title');
            const optionsEl = document.getElementById('modal-options');
            
            titleEl.innerText = title;
            optionsEl.innerHTML = filter.map(r => `
                <button onclick="handleModalSelect('${r}')" class="flex items-center gap-4 bg-slate-800 border border-slate-700 p-3 rounded-xl hover:bg-slate-700 hover:border-blue-500 transition-all text-left w-full">
                    <div class="w-6 h-6 text-blue-400">${ICONS[r]}</div>
                    <div class="font-bold text-white uppercase tracking-wider text-sm">${r}</div>
                </button>
            `).join('');
            
            state.modalCallback = callback;
            modal.classList.remove('hidden');
        }

        function handleModalSelect(rune) {
            const cb = state.modalCallback;
            closeModal(); // Chiudi prima di eseguire il callback
            if(cb) cb(rune);
        }

        function closeModal() {
            document.getElementById('rune-modal').classList.add('hidden');
            state.modalCallback = null;
        }

        function renderHeroActions() {
            const container = document.getElementById('hero-actions');
            container.innerHTML = '';
            
            if(state.selectedUnits.includes('teclis') && state.currentRound >= 2) {
                container.innerHTML += `
                    <button onclick="actionTeclis()" class="bg-blue-900/40 border border-blue-500 text-blue-300 text-[10px] p-2 rounded uppercase font-bold hover:bg-blue-500 hover:text-white transition-all flex justify-between items-center w-full">
                        <span>+ Teclis Disc Rune</span>
                        <span class="text-[8px] bg-blue-500 text-white px-1 rounded">${state.teclisRune || 'OFF'}</span>
                    </button>`;
            }
            if(state.selectedUnits.includes('calligrave')) {
                container.innerHTML += `
                    <button onclick="actionCalligrave()" class="bg-purple-900/40 border border-purple-500 text-purple-300 text-[10px] p-2 rounded uppercase font-bold hover:bg-purple-500 hover:text-white transition-all w-full">
                        Calligrave Realmscribe
                    </button>`;
            }
        }

        function actionTeclis() {
            openRuneModal("Teclis: Runa Extra", (rune) => {
                state.teclisRune = rune;
                updateBattleUI();
            });
        }

        function actionCalligrave() {
            // Ottieni le rune attualmente lockate
            const lockedEntries = Object.entries(state.lockedRunes).filter(([rd, r]) => r !== null);
            
            if(lockedEntries.length === 0) {
                alert("Nessuna runa bloccata da sostituire!");
                return;
            }

            // Primo step: scegli quale runa vuoi togliere
            const uniqueLocked = [...new Set(lockedEntries.map(e => e[1]))];
            
            setTimeout(() => {
                openRuneModal("Quale runa vuoi sostituire?", (oldRune) => {
                    // Secondo step: scegli con cosa sostituirla (ritardo per evitare glitch modale)
                    setTimeout(() => {
                        openRuneModal(`Sostituisci ${oldRune} con:`, (newRune) => {
                            for(let rd in state.lockedRunes) {
                                if(state.lockedRunes[rd] === oldRune) {
                                    state.lockedRunes[rd] = newRune;
                                }
                            }
                            updateBattleUI();
                        });
                    }, 100);
                }, uniqueLocked);
            }, 50);
        }

        function renderUnitBuffs() {
            const container = document.getElementById('buff-container');
            const active = getActiveRunes();
            const current = state.lockedRunes[state.currentRound];
            
            const buffs = [];
            
            const count = (r) => {
                let c = active.filter(x => x === r).length;
                if(r === 'Varinor' && state.selectedUnits.includes('lyrior')) c++;
                if(r === 'Alaithi' && state.selectedUnits.includes('avalenor')) c++;
                if(r === 'Oreali' && state.selectedUnits.includes('sevireth')) c++;
                return c;
            };

            if(state.selectedUnits.includes('bladelords')) {
                buffs.push({ unit: 'Bladelords', text: `+${count('Varinor')} Rend (Masters of Combat)` });
            }
            if(state.selectedUnits.includes('stoneguard') && count('Alaithi') >= 2) {
                buffs.push({ unit: 'Stoneguard', text: `Save 3+ (Fortitude of Earth)` });
            }
            if(state.selectedUnits.includes('windchargers') && count('Oreali') >= 2) {
                buffs.push({ unit: 'Windchargers', text: `+6" Range (Windborne)` });
            }
            if(state.selectedUnits.includes('riverblades') && (current === 'Ydriliqi' || state.teclisRune === 'Ydriliqi')) {
                buffs.push({ unit: 'Riverblades', text: `Special Deployment attivo` });
            }

            container.innerHTML = buffs.length ? buffs.map(b => `
                <div class="bg-slate-900 border-l-2 border-blue-500 p-2 rounded shadow-lg">
                    <div class="text-[9px] font-black text-blue-400 uppercase">${b.unit}</div>
                    <div class="text-[10px] text-white">${b.text}</div>
                </div>
            `).join('') : '<div class="text-slate-600 italic text-[10px]">Nessun buff warscroll attivo.</div>';
        }

        window.onload = init;
    </script>
</body>
</html>
