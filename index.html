<<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumineth Battle Scripture - Grid View</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@300;400;600;700&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #020617; 
            background-image: radial-gradient(circle at 50% 0%, #0f172a 0%, #020617 100%);
            color: #f8fafc;
            margin: 0;
        }

        .rune-font { font-family: 'Cinzel', serif; }
        
        .scripture-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        @media (max-width: 640px) {
            .scripture-grid { grid-template-columns: 1fr; }
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .active-rune-border {
            border-color: #22d3ee;
            box-shadow: 0 0 25px rgba(34, 211, 238, 0.15);
        }

        .rune-symbol-container {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%);
        }

        .enhanced-active {
            color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Helper per le icone
        const Icon = ({ name, className }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                const checkLucide = setInterval(() => {
                    if (window.lucide && window.lucide.icons[name]) {
                        setSvg(window.lucide.icons[name].toSvg({ class: className }));
                        clearInterval(checkLucide);
                    }
                }, 50);
                return () => clearInterval(checkLucide);
            }, [name, className]);
            return svg ? <span className="flex" dangerouslySetInnerHTML={{ __html: svg }} /> : <div className={className + " bg-white/5 rounded"}></div>;
        };

        const RUNES = [
            {
                id: 'varinor',
                name: 'Varinor',
                title: 'Runa della Forza',
                icon: 'Zap',
                color: 'text-amber-400',
                effect: 'Scegli fino a 2 unità Lumineth: +1 ai tiri per Correre e Caricare.',
                enhanced: [
                    { req: 'ydriliqi', text: 'Se Ydriliqi è attiva: +1 ai tiri per Ferire in mischia.' },
                    { req: 'oreali', text: 'Se Oreali è attiva: Possono Tirare/Caricare dopo Ritirata.' }
                ]
            },
            {
                id: 'entari',
                name: 'Entari',
                title: 'Runa della Guarigione',
                icon: 'Shield',
                color: 'text-blue-400',
                effect: 'Fine turno: scegli un\'unità Lumineth e cura D3 ferite.',
                enhanced: [
                    { req: 'varinor', text: 'Se Varinor è attiva: Gli EROI curano invece D6 ferite.' }
                ]
            },
            {
                id: 'ydriliqi',
                name: 'Ydriliqi',
                title: 'Runa del Fiume',
                icon: 'Droplets',
                color: 'text-cyan-400',
                effect: 'Nemici entro 3" dalle tue unità: -1 ai tiri per Colpire.',
                enhanced: [
                    { req: 'entari', text: 'Se Entari è attiva: -1 anche ai tiri per Ferire nemici.' }
                ]
            },
            {
                id: 'oreali',
                name: 'Oreali',
                title: 'Runa del Vento',
                icon: 'Wind',
                color: 'text-emerald-400',
                effect: 'Attacchi a distanza contro unità Lumineth: -1 al tiro per Colpire.',
                enhanced: [
                    { req: 'ydriliqi', text: 'Se Ydriliqi è attiva: +3" alla caratteristica Movimento.' }
                ]
            }
        ];

        function App() {
            const [activeRunes, setActiveRunes] = useState([]);

            const toggleRune = (id) => {
                setActiveRunes(prev => 
                    prev.includes(id) ? prev.filter(r => r !== id) : [...prev, id]
                );
            };

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-5xl mx-auto">
                        
                        {/* Header con stile Manuale */}
                        <header className="mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-white/10 pb-6">
                            <div>
                                <h2 className="text-cyan-500 font-bold tracking-[0.2em] text-xs uppercase mb-1">Battle Trait</h2>
                                <h1 className="rune-font text-4xl font-black text-white italic">Depict Rune</h1>
                            </div>
                            <div className="flex gap-4">
                                <button 
                                    onClick={() => setActiveRunes([])}
                                    className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-400 text-xs font-bold rounded-lg border border-white/5 transition-colors flex items-center gap-2"
                                >
                                    <Icon name="RefreshCw" className="w-3 h-3" /> RESET ROUND
                                </button>
                            </div>
                        </header>

                        {/* Griglia delle Rune - Una schermata unica */}
                        <div className="scripture-grid">
                            {RUNES.map(rune => {
                                const isActive = activeRunes.includes(rune.id);
                                return (
                                    <div 
                                        key={rune.id}
                                        onClick={() => toggleRune(rune.id)}
                                        className={`glass-panel rounded-2xl p-5 cursor-pointer transition-all duration-300 border-2 ${isActive ? 'active-rune-border' : 'border-transparent hover:border-white/10'}`}
                                    >
                                        <div className="flex items-center gap-4 mb-4">
                                            <div className={`rune-symbol-container ${isActive ? 'bg-cyan-500/20' : ''}`}>
                                                <Icon name={rune.icon} className={`w-8 h-8 ${isActive ? rune.color : 'text-slate-600'}`} />
                                            </div>
                                            <div className="flex-1">
                                                <h3 className="rune-font text-xl font-bold leading-none">{rune.name}</h3>
                                                <p className="text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1">{rune.title}</p>
                                            </div>
                                            <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${isActive ? 'bg-cyan-500 border-cyan-400' : 'border-slate-700'}`}>
                                                {isActive && <Icon name="Check" className="w-4 h-4 text-white" />}
                                            </div>
                                        </div>

                                        <div className="space-y-4">
                                            {/* Effetto Base */}
                                            <div className="bg-white/5 rounded-xl p-3 border border-white/5">
                                                <p className={`text-sm leading-tight ${isActive ? 'text-slate-100' : 'text-slate-500'}`}>
            
